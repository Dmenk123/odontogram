function reloadFormTindakanLab(){resetFormTindakanLab(),$("#CssLoader").removeClass("hidden"),$.ajax({type:"post",url:base_url+"rekam_medik/load_form_tindakanlab",data:{id_peg:id_peg,id_psn:id_psn,id_reg:id_reg},dataType:"json",success:function(a){$("#CssLoader").addClass("hidden"),$("#tabel_modal_tindakanlab tbody").html(a.html)}})}function hapus_tindakanlab_det(n){swalConfirmDelete.fire({title:"Hapus Data Tindakan Lab ?",text:"Data Akan dihapus ?",type:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus Data !",cancelButtonText:"Tidak, Batalkan!",reverseButtons:!0}).then(a=>{a.value?$.ajax({url:base_url+"rekam_medik/delete_data_tindakanlab_det",type:"POST",dataType:"JSON",data:{id:n},success:function(a){swalConfirm.fire("Berhasil Hapus Data!",a.pesan,"success"),reloadFormTindakanLab()},error:function(a,n,t){Swal.fire("Terjadi Kesalahan")}}):a.dismiss===Swal.DismissReason.cancel&&swalConfirm.fire("Dibatalkan","Aksi Dibatalakan","error")})}$(document).ready(function(){$("#tindakanlab").select2({tokenSeparators:[","," "],minimumInputLength:0,minimumResultsForSearch:5,ajax:{url:base_url+"master_laboratorium/get_select_tindakanlab",dataType:"json",type:"GET",data:function(a){return{term:a.term}},processResults:function(a){return{results:$.map(a,function(a){return{text:a.text,id:a.id,kode:a.kode,nama:a.nama,harga:a.harga,harga_raw:a.harga_raw,disc_persen:a.disc_persen,harga_nett:a.harga_nett,harga_nett_raw:a.harga_nett_raw}})}}}}),$("#tindakanlab").on("select2:selecting",function(a){a=a.params.args.data;$("#form_tindakanlab input[name='tdklab_kode']").val(a.kode),$("#form_tindakanlab input[name='tdklab_tindakan']").val(a.nama),$("#form_tindakanlab input[name='tdklab_harga']").val(a.harga),$("#form_tindakanlab input[name='tdklab_harga_raw']").val(a.harga_raw),$("#form_tindakanlab input[name='tdklab_diskon']").val(a.disc_persen),$("#form_tindakanlab input[name='tdklab_nett']").val(a.harga_nett),$("#form_tindakanlab input[name='tdklab_nett_raw']").val(a.harga_nett_raw)})});const resetFormTindakanLab=()=>{$("#tindakanlab").val("").trigger("change"),$("#form_tindakanlab input[name='tdklab_kode']").val(""),$("#form_tindakanlab input[name='tdklab_tindakan']").val(""),$("#form_tindakanlab input[name='tdklab_harga']").val(""),$("#form_tindakanlab input[name='tdklab_harga_raw']").val(""),$("#form_tindakanlab input[name='tdklab_diskon']").val(""),$("#form_tindakanlab input[name='tdklab_nett']").val(""),$("#form_tindakanlab input[name='tdklab_nett_raw']").val(""),$("#form_tindakanlab input[name='tdklab_ket']").val("")},setHargaLabRaw=()=>{let a=$("#tdklab_diskon").val(),n=$("#tdklab_harga").inputmask("unmaskedvalue");var t=parseFloat(n).toFixed(2),e=parseFloat(n-n*a/100).toFixed(2);$("#tdklab_harga_raw").val(t),$("#tdklab_nett_raw").val(e),$("#tdklab_nett").val(formatMoney(Number(e)))};