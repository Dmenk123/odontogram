var save_method,table;function reload_table(){table.ajax.reload(null,!1)}function save(e=null){var a;a=null==e?base_url+"master_klinik/add_data":base_url+"master_klinik/update_data?id="+e;e=$("#form_profile")[0],e=new FormData(e);$("#btnSave").prop("disabled",!0),$("#btnSave").text("Menyimpan Data"),$.ajax({type:"POST",enctype:"multipart/form-data",url:a,data:e,dataType:"JSON",processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){if(e.status)swalConfirm.fire("Berhasil !",e.pesan,"success").then(e=>{e.value&&(window.location.href=base_url+"master_klinik")});else{for(var a=0;a<e.inputerror.length;a++)"pegawai"!=e.inputerror[a]?($('[name="'+e.inputerror[a]+'"]').addClass("is-invalid"),$('[name="'+e.inputerror[a]+'"]').next().text(e.error_string[a]).addClass("invalid-feedback")):$('[name="'+e.inputerror[a]+'"]').next().next().text(e.error_string[a]).addClass("invalid-feedback-select");$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan")}},error:function(e){console.log("ERROR : ",e),$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan"),reset_modal_form(),$(".modal").modal("hide")}})}function delete_transaksi(a){swalConfirmDelete.fire({title:"Hapus Data ?",text:"Data Akan dihapus permanen ?",type:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus Data !",cancelButtonText:"Tidak, Batalkan!",reverseButtons:!0}).then(e=>{e.value?$.ajax({url:base_url+"master_klinik/delete_data",type:"POST",dataType:"JSON",data:{id:a},success:function(e){swalConfirm.fire("Berhasil Hapus Klinik!",e.pesan,"success").then(e=>{e.value&&(window.location.href=base_url+"master_klinik")}),table.ajax.reload()},error:function(e,a,t){Swal.fire("Terjadi Kesalahan")}}):e.dismiss===Swal.DismissReason.cancel&&swalConfirm.fire("Dibatalkan","Aksi Dibatalakan","error")})}function reset_modal_form(){$("#form-user")[0].reset(),$(".append-opt").remove(),$("div.form-group").children().removeClass("is-invalid invalid-feedback"),$("span.help-block").text(""),$("#div_pass_lama").css("display","none"),$("#div_preview_foto").css("display","none"),$("#div_skip_password").css("display","none"),$("#label_foto").text("Pilih gambar yang akan diupload"),$("#username").attr("disabled",!1)}function reset_modal_form_import(){$("#form_import_excel")[0].reset(),$("#label_file_excel").text("Pilih file excel yang akan diupload")}function import_excel(){$("#modal_import_excel").modal("show"),$("#modal_import_title").text("Import data user")}function import_data_excel(){var e=$("#form_import_excel")[0],e=new FormData(e);$("#btnSaveImport").prop("disabled",!0),$("#btnSaveImport").text("Import Data"),$.ajax({type:"POST",enctype:"multipart/form-data",url:base_url+"master_user/import_data_master",data:e,dataType:"JSON",processData:!1,contentType:!1,success:function(e){e.status?swal.fire("Sukses!!",e.pesan,"success"):swal.fire("Gagal!!",e.pesan,"error"),$("#btnSaveImport").prop("disabled",!1),$("#btnSaveImport").text("Simpan"),reset_modal_form_import(),$(".modal").modal("hide"),table.ajax.reload()},error:function(e){console.log("ERROR : ",e),$("#btnSaveImport").prop("disabled",!1),$("#btnSaveImport").text("Simpan"),reset_modal_form_import(),$(".modal").modal("hide"),table.ajax.reload()}})}function readURL(e){var a;e.files&&e.files[0]?((a=new FileReader).onload=function(e){$("#div_preview_foto").css("display","block"),$("#preview_img").attr("src",e.target.result)},a.readAsDataURL(e.files[0])):($("#div_preview_foto").css("display","none"),$("#preview_img").attr("src",""))}$(document).ready(function(){$("input.numberinput").bind("keypress",function(e){return 8==e.which||0==e.which||!(e.which<48||57<e.which)||46==e.which}),$("#foto").change(function(){readURL(this)}),table=$("#tabel_klinik").DataTable({responsive:!0,processing:!0,serverside:!0,ajax:{url:base_url+"master_klinik/list_data_klinik",type:"POST"},language:{decimal:",",thousands:"."}})});