var save_method,table;function add_menu(){reset_modal_form(),save_method="add",$("#modal_log").modal("show"),$("#modal_title").text("Tambah Log Harga Jual")}function reload_table(){table.ajax.reload(null,!1)}function monitoring(a,e,t,n){url=base_url+"monitoring_pelanggan/monitoring_cart",$.ajax({type:"POST",enctype:"multipart/form-data",url:url,data:{id_pelanggan:a,id_barang:e,start:t,end:n},dataType:"JSON",timeout:6e5,success:function(a){if(a.status)console.log("berhasil"),new Chart(document.getElementById("line-chart"),{type:"bar",data:{labels:a.label,datasets:a.datasets},options:{title:{display:!0,text:a.judul}}});else{for(var e=0;e<data.inputerror.length;e++)"jabatans"!=data.inputerror[e]?($('[name="'+data.inputerror[e]+'"]').addClass("is-invalid"),$('[name="'+data.inputerror[e]+'"]').next().text(data.error_string[e]).addClass("invalid-feedback")):$($("#jabatans").data("select2").$container).addClass("has-error");$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan")}},error:function(a){console.log("ERROR : ",a),$("#btnSave").prop("disabled",!1),$("#btnSave").text("Simpan"),reset_modal_form(),$(".modal").modal("hide")}})}function getBarang(a){a=$(a).val();field=$("[name='id_barang']"),field.html("<option value=''>Loading</option>"),$.ajax({url:base_url+"monitoring_pelanggan/get_barang",type:"POST",data:{id_pelanggan:a},dataType:"json"}).done(function(a){var e="<option value=''>Pilih Barang</option>";if(console.log(a),a)for(i=0;i<a.length;i++){var t="<option value='"+a[i].id_barang+"' ";e+=t+=" >"+a[i].nama_barang+"</option>"}field.html(e),$("#jenis_event").data("selectBox-selectBoxIt").refresh()})}$(document).ready(function(){$("input.numberinput").bind("keypress",function(a){return 8==a.which||0==a.which||!(a.which<48||57<a.which)||46==a.which}),$("#filters").click(function(){var a=$("#id_pelanggan").val(),e=$("#id_barang").val(),t=$("#start").val(),n=$("#end").val();if(t&&n){var i=t.split("/"),l=new Date(i[2],i[1]-1,i[0]),i=n.split("/");if(new Date(i[2],i[1]-1,i[0])<l)return void Swal.fire("Tanggal Mulai dilarang melebihi tanggal akhir")}else if(!a)return void Swal.fire("Silahkan memilih pelanggan terlebih dahulu");monitoring(a,e,t,n),""!=a&&(table=$("#tabel_mon_pelanggan").DataTable({responsive:!0,searchDelay:500,processing:!0,serverSide:!1,bDestroy:!0,ajax:{url:base_url+"monitoring_pelanggan/datatable_monitoring",type:"POST",data:{id_pelanggan:a,id_barang:e,start:t,end:n}},columnDefs:[{targets:[-1],orderable:!1}]}))}),$(".modal").on("hidden.bs.modal",function(){reset_modal_form(),reset_modal_form_import()})});